<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title slot="start" *ngIf="currentRoute$ | async as currentPage">
      {{ currentPage.data['title'] }}</ion-title
    >

    <ng-container *ngIf="currentUser$ | async as currentUser">
      <ng-container *ngIf="currentUser.hasFinishedRegistration">
        <ion-note slot="start" class="ion-hide-md-down"
          >You're logged in as {{ currentUser.firstName }}
          {{ currentUser.lastName }} ({{ currentUser.email }})
        </ion-note>
      </ng-container>
      <ng-container *ngIf="!currentUser.hasFinishedRegistration">
        <ion-note>Logged in as {{currentUser.email}}</ion-note>
      </ng-container>
    </ng-container>

    <ng-container
      *ngIf="isAuthenticated$ | async; then userProfile; else login"
    >
    </ng-container>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  <ng-container *ngTemplateOutlet="content"></ng-container>
</ion-content>

<ng-template #login>
  <ion-button
    (click)="onLoginClicked()"
    class="ion-padding-horizontal"
    color="primary"
    slot="end"
  >
    <ion-icon name="log-in-outline" slot="start"></ion-icon>
    Login
  </ion-button>
</ng-template>

<ng-template #userProfile>
  <ion-button
    class="ion-padding-horizontal"
    color="primary"
    slot="end"
    (click)="onUserProfileClicked()"
  >
    <ion-icon name="person-circle-outline" slot="start"></ion-icon>
    Profile
  </ion-button>
</ng-template>
